@using KuMaDaoCoreAbp.Web.Areas.Admin.Models.Common.Modals
@model KuMaDaoCoreAbp.Web.Areas.Admin.Models.Article.EditArticleDetailModal
@{
    Layout = null;
    var temp = Model.ArticleDetailDto;
}

<div class="modal-body">
    <form name="ArticleDetailUpdateForm" role="form" novalidate class="form-validation">
        <input type="hidden" name="Id" value="@temp.Id" />
        <input type="hidden" name="ArticleId" value="@temp.ArticleId" />
        <div class="row clearfix">

        </div>
        <div class="row clearfix">
            <div class="col-sm-12">
                <div class="form-group form-float">
                    <div class="form-line">
                        <label for="" class="form-label">分支名</label>
                        <input id="title" type="text" name="Title" value="" required maxlength="32" minlength="2" class="validate form-control">
                        <button>删除</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group form-float">
                    <div class="form-line">                       
                        @*<textarea id="article-description" name="Description" class="validate form-control"></textarea>*@
                        <script id="editor" name="Body" type="text/plain" style="width:100%;height:500px;">
                            @Html.Raw(temp.Body)
                        </script>
                    </div>
                </div>
            </div>
        </div>
        <div class="row clearfix">
            <div class="col-sm-12">
                <div class="form-group form-float">
                    <div class="form-line">
                        <label for="" class="form-label">文件格式</label>
                        <input id="title" type="text" name="Title" value="" required maxlength="32" minlength="2" class="validate form-control">
                        
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<div class="modal-footer">
    <button type="button" id="Back" class="btn btn-default waves-effect" data-dismiss="modal">@L("Cancel")</button>
    <button type="button" id="ArticleDetailUpdate_Confrim" class="btn btn-primary waves-effect">@L("Save")</button>
</div>
<script src="~/lib/ueditor/ueditor.config.js"></script>
<script src="~/lib/ueditor/ueditor.all.js"></script>
<script src="~/lib/ueditor/lang/zh-cn/zh-cn.js"></script>
<script src="~/view-resources/Views/Article/_editArticleDetailModal.js" asp-append-version="true"></script>
<script>
    (function ($) {
        var editor = UE.getEditor('editor', {
            //initialFrameWidth: 895,
            initialFrameHeight: 300,
            //这里可以选择自己需要的工具按钮名称,此处仅选择如下五个
            //toolbars: [[]],
            initialStyle: 'body{font-size:12px}',
            topOffset: 0,
            //focus时自动清空初始化时的内容
            autoClearinitialContent: false,
            //关闭字数统计
            wordCount: true,
            //当输入的字符数超过该值时，保存一次现场
            maxInputCount: 200,
            //关闭elementPath
            elementPathEnabled: true
            //更多其他参数，请参考editor_config.js中的配置项
        });   
        //todo https://www.cnblogs.com/lhm166/articles/6079973.html
        editor.ready(function () {
            uploadEditor.addListener("beforeInsertImage", _beforeInsertImage);
            uploadEditor.addListener("afterUpfile", _afterUpfile);
        });
        function _beforeInsertImage(t, result) {
            var imageHtml = '';
            for (var i in result) {
                imageHtml += '<li><img src="' + result[i].src + '" alt="' + result[i].alt + '" height="150"></li>';
            }
            document.getElementById('upload_img_wrap').innerHTML = imageHtml;
        }
        function _afterUpfile(t, result) {
            var fileHtml = '';
            for (var i in result) {
                fileHtml += '<li><a href="' + result[i].url + '" target="_blank">' + result[i].url + '</a></li>';
            }
            document.getElementById('upload_file_wrap').innerHTML = fileHtml;
        }
     })(jQuery);
</script>
